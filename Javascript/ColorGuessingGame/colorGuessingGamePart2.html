<!DOCTYPE html>
<html>
<head>
	<title>Color Guessing Game Part 2</title>
</head>
<body onload = "startGame()">

	<script>
		// initialise global variables
		var colorArr = ["violet", "indigo", "blue", "green", "yellow", "orange", "red", "black", "pink", "grey"];
		var finished = false;
		var numberOfGuesses = 0;

		function startGame(){

			// sort the colors array alphabetically 			
			colorArr = colorArr.sort();

			// randomly obtain an index with range [0, colorArr.length)
			var targetIdx = Math.floor(Math.random() * colorArr.length);

			// obtain the color to be guessed by the user based on the random number generated above
			var targetColor = colorArr[targetIdx];

			// display for debugging purposes
			alert("The target color is : " + targetColor);

			while(!finished){
				var guess = prompt("I am thinking of one of these colors: \n\n" + colorArr + 
									"\n\nWhat color am i thinking of?");

				numberOfGuesses += 1;
				finished = checkGuess(guess, targetColor);

			}
			//change the web page background color to the target color value
			document.body.style.background = guess;
			alert("Correct! You got the color in " + numberOfGuesses + " guesses!");
		}

		// function for checking whether the users guess is correct or not.
		function checkGuess(guess, targetColor){
		 	if (colorArr.indexOf(guess) == -1){
		 		alert("Sorry! I don't recognise that color. Please try again.");
		 		return false;
		 	}else if (guess > targetColor) {
		 		alert("Sorry, your guess is not correct!\n\n" + 
		 				"HINT: Your guess is alphabetically higher than mine. Please try again.");
		 		return false
		 	} else if (guess < targetColor) {
		 		alert("Sorry, your guess is not correct!\n\n" +
		 				"HINT: Your guess is alphabetically lower than mine. Please try again.");
		 		return false
		 	} else if (guess == targetColor){
		 		return true;
		 	}
		}
	</script>
</body>
</html>